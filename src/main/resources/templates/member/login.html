<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      layout:decorate="~{layouts/layout}">

<th:block layout:fragment="css"></th:block>

<div layout:fragment="content">
    <h1>로그인</h1>

    <div class="container">
        <form action="/member/login" method="post" role="form" class="knotted_login_form">
            <ul>
                <li>
                    <label for="email">아이디</label>
                    <input type="text" name="email" id="email" placeholder="이메일을 입력해주세요">
                </li>
                <li>
                    <label for="password">비밀번호</label>
                    <input type="password" name="password" id="password" placeholder="비밀번호를 입력해주세요">
                </li>
            </ul>
            <p>
                <a th:href="@{/member/findId}">아이디찾기</a>
                <a th:href="@{/member/findPw}">비밀번호찾기</a>
            </p>
            <button type="submit">로그인</button>
            <a th:href="@{/member/join}" class="join">회원가입</a>

            <!--/* CSRF 공격 방지용 */-->
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
        </form>
    </div>
</div>

<th:block layout:fragment="script">
    <script th:inline="javascript">
        $(document).ready(function(){
            let errorMessage = [[${errorMessage}]];
            if(errorMessage != null){
                alert(errorMessage); // 에러 메시지 출력
                history.replaceState(null, null, '/member/login'); // 현재 URL 히스토리 바꿈
            }
        });
    </script>
</th:block>

</html>